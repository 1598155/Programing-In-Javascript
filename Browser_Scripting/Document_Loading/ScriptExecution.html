<!DOCTYPE html>
<html>
<head>
<title>脚本执行方式 - JavaScript编程语言</title>
<meta charset="UTF-8">
<meta name="baidu-site-verification" content="LPyqUhB1p3" />
<meta name="viewport" content="width=device-width">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="JavaScript编程语言 - 一本开源的JavaScript编程指南; An open-sourced Javascript Guide and Tutorial; 脚本执行方式 执行入口  script标签 eval函数 Function构造函数 setTimeout和setInterval函数 HTML标签内的事件绑定相关的內联函数（onclick等） 其他hacks  script标签 最基本，最常用的脚本引入方式。例如： &lt;script src=&quot;http://code.jquery.com/jquery-1.11.0.min.js&quot;&gt;&lt;/script">
<meta name="keywords" content="Javascript, guide, open-sourced ">
<link rel="stylesheet" type="text/css" href="/style.css" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-313435-11', 'robinqu.me');
  ga('send', 'pageview');

</script>
</head>
<body>
<header class="clearfix">
  <div class="left back-toc">
    <ul class="inline-list">
      <li><a href="/">目录</a></li>
      
        <li class="seperator">></li>
        <li>面向浏览器编程</li>
      
        <li class="seperator">></li>
        <li>文档加载</li>
      
      
      <li class="seperator">></li>
      <li class="current"><strong>当前页面</strong></li>
      
      <li>(<a href="https://github.com/RobinQu/Programing-In-Javascript/edit/master/chapters/Browser_Scripting/Document_Loading/ScriptExecution.md">编辑</a>)</li>
    </ul>
  </div>
  <div class="right">
    <a href="/"><img src="/images/logo.png" alt="Javascript编程语言" width="256" height="50" /></a>
  </div>
</header>
<div class="primary">
  <h1 id="-">脚本执行方式</h1>
<h2 id="-">执行入口</h2>
<ul>
<li>script标签</li>
<li><code>eval</code>函数</li>
<li><code>Function</code>构造函数</li>
<li><code>setTimeout</code>和<code>setInterval</code>函数</li>
<li>HTML标签内的事件绑定相关的內联函数（<code>onclick</code>等）</li>
<li>其他hacks</li>
</ul>
<h3 id="script-">script标签</h3>
<p>最基本，最常用的脚本引入方式。例如：</p>
<pre><code>&lt;script src=&quot;http://code.jquery.com/jquery-1.11.0.min.js&quot;&gt;&lt;/script&gt;
</code></pre><p>尽管在HTML4和XHTML里面，要求开发者使用<code>type</code>属性来制定脚本的类型。但是主流浏览器都默认认为脚本类型是<code>text/javascript</code>。</p>
<p>在HTML5的规范内<sup id="fnref1"><a href="#fn1">1</a></sup>，<code>script</code>标签的type属性是完全可选的。</p>
<h3 id="eval-">eval函数</h3>
<ul>
<li><code>eval</code> is evil</li>
<li><code>eval</code>有访问本地scope的权利</li>
</ul>
<pre><code>var a = 1;
eval(&quot;a=2&quot;);
a === 2; // ==&gt; true
</code></pre><h3 id="function-">Function构造函数</h3>
<ul>
<li>function是“first-class citizen”<sup id="fnref2"><a href="#fn2">2</a></sup>；自然有相应的构造函数</li>
<li><code>new Function(arg1, arg2, ..., fnStr)</code></li>
<li><code>Function</code><sup id="fnref3"><a href="#fn3">3</a></sup>构造函数本质是创建一个函数对象；其创建的函数执行也并不能访问其所在创建环境的闭包，只能访问本地作用域（local scope）和全局作用域（global scope）</li>
<li><code>Function()</code>和<code>new Function()</code>效果一样</li>
</ul>
<pre><code>(function() {
  var a = 1;
  var func = new Function(&quot;a=2&quot;);
  func();
  a === 2; // ==&gt; false
}());
a === 2; // ==&gt; true
</code></pre><h3 id="settimeout-setinterval">setTimeout和setInterval</h3>
<pre><code>setTimeout(&quot;alert(&#39;haha&#39;)&quot;, 0);
</code></pre><p>这个和eval有异曲同工之妙，对作用域的访问也是类似的。</p>
<p>另外要说名，以上几点，除了script标签的方法之外，其他方法都在<code>strict</code>模式<sup id="fnref4"><a href="#fn4">4</a></sup>下不可用。</p>
<h3 id="html-">HTML內联事件回调</h3>
<pre><code>&lt;a href=&#39;#hello&#39; onclick=&quot;alert(this.href)&quot;&gt;Say hello&lt;/a&gt;
</code></pre><p>这样如同在click事件的<code>Target Phase</code>运行了一个回调。<code>this</code>指向目标元素本身。</p>
<h3 id="-hack">其他Hack</h3>
<p>利用MessageChannel等新特性可以触发一些函数的执行<sup id="fnref5"><a href="#fn5">5</a></sup>。也许JavaScript的其他的角落也有不少其他执行脚本的入口吧。</p>
<hr>
<div class="footnotes">
<ol>
<li id="fn1"><p><a href="http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#the-script-element">http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#the-script-element</a></p>
<a href="#fnref1" class="footnoteBackLink" title="Jump back to footnote 1 in the text.">↩</a></li>
<li id="fn2"><p><a href="https://developer.mozilla.org/en-US/docs/functional-javascript/First-class_citizen">https://developer.mozilla.org/en-US/docs/functional-javascript/First-class_citizen</a></p>
<a href="#fnref2" class="footnoteBackLink" title="Jump back to footnote 2 in the text.">↩</a></li>
<li id="fn3"><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function</a></p>
<a href="#fnref3" class="footnoteBackLink" title="Jump back to footnote 3 in the text.">↩</a></li>
<li id="fn4"><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/Strict_mode">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/Strict_mode</a></p>
<a href="#fnref4" class="footnoteBackLink" title="Jump back to footnote 4 in the text.">↩</a></li>
<li id="fn5"><p><a href="https://github.com/kriskowal/asap/blob/master/asap.js">https://github.com/kriskowal/asap/blob/master/asap.js</a></p>
<a href="#fnref5" class="footnoteBackLink" title="Jump back to footnote 5 in the text.">↩</a></li>
</ol>
</div>

</div>
<footer class="misc clearfix">
  <p class="hint">建议在新版的Chrome、Safari、Firefox中阅读</p>
  <div class="left">
    <ul class="inline-list">
      <li><a href="https://github.com/RobinQu/Programing-In-Javascript/">Source</a></li>
      <li><a href="https://github.com/RobinQu/Programing-In-Javascript/blob/master/README.md">Contributors</a></li>
      <li><a href="https://github.com/RobinQu/Programing-In-Javascript/issues">Issues</a></li>
    </ul>
  </div>
  <div class="right">
    <ul class="inline-list">
      <li>Rev <a href="https://github.com/RobinQu/Programing-In-Javascript/tree/664062a/chapters/Browser_Scripting/Document_Loading/ScriptExecution.md">664062a</a></li>
      <li>2014-05-29T12:57:36.459Z</li>
    </ul>
  </div>
</footer>
</body>
</html>