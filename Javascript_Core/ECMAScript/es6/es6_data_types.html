<!DOCTYPE html>
<html>
<head>
<title>ES6引入的数据结构 - Javascript编程语言</title>
<meta charset="UTF-8">
<meta name="baidu-site-verification" content="LPyqUhB1p3" />
<meta name="viewport" content="width=device-width">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="Javascript编程语言 - 一本开源的Javascript编程指南; An open-sourced Javascript Guide and Tutorial; ES6引入的数据结构 ES6新加入的数据类型有：  WeakMap WeakSet Map Set Typed Objects1 Proxy2 Symbol3 Promise4  这些数据结构的支持并不广泛，在写这篇文章的时候。仅有新版本的Firefox和Node v0.11.x以上版本（开启--harmony参数后）支持。 Map 提供传统意义上的Map。支持任意对象作为key。 new Map">
<meta name="keywords" content="Javascript, guide, open-sourced ">
<link rel="stylesheet" type="text/css" href="/style.css" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-313435-11', 'robinqu.me');
  ga('send', 'pageview');

</script>
</head>
<body>
<header class="clearfix">
  <div class="left back-toc">
    <ul class="inline-list">
      <li><a href="/">目录</a></li>
      
        <li class="seperator">></li>
        <li>Javascript核心</li>
      
        <li class="seperator">></li>
        <li>ECMAScript特性</li>
      
        <li class="seperator">></li>
        <li>es6(Unlocalized)</li>
      
      
      <li class="seperator">></li>
      <li class="current"><strong>当前页面</strong></li>
      
      <li>(<a href="https://github.com/RobinQu/Programing-In-Javascript/edit/master/chapters/Javascript_Core/ECMAScript/es6/es6_data_types.md">编辑</a>)</li>
    </ul>
  </div>
  <div class="right">
    <a href="/"><img src="/images/logo.png" alt="Javascript编程语言" width="256" height="50" /></a>
  </div>
</header>
<div class="primary">
  <h1 id="es6-">ES6引入的数据结构</h1>
<p>ES6新加入的数据类型有：</p>
<ul>
<li>WeakMap</li>
<li>WeakSet</li>
<li>Map</li>
<li>Set</li>
<li>Typed Objects<sup id="fnref1"><a href="#fn1">1</a></sup></li>
<li>Proxy<sup id="fnref2"><a href="#fn2">2</a></sup></li>
<li>Symbol<sup id="fnref3"><a href="#fn3">3</a></sup></li>
<li>Promise<sup id="fnref4"><a href="#fn4">4</a></sup></li>
</ul>
<p>这些数据结构的支持并不广泛，在写这篇文章的时候。仅有新版本的Firefox和Node v0.11.x以上版本（开启<code>--harmony</code>参数后）支持。</p>
<h2 id="map">Map</h2>
<p>提供传统意义上的Map。支持任意对象作为key。</p>
<p><code>new Map(iterable)</code></p>
<p>iteralbe是Array或其他可枚举的对象，其每个元素是key、value的2元数组。</p>
<p>重要的属性和方法：</p>
<ul>
<li>Map.prototype.size</li>
<li>Map.prototype.clear()</li>
<li>Map.prototype.entries()</li>
<li>Map.prototype.forEach(callback, thisArg)</li>
<li>Map.prototype.get(k)</li>
<li>Map.prototype.set(k,v)</li>
<li>Map.prototype.has(k)</li>
<li>Map.prototype.keys()</li>
<li>Map.prototype.values()</li>
</ul>
<h2 id="set">Set</h2>
<p>传统意义上的<code>Set</code>。</p>
<ul>
<li>Set.prototype.size</li>
<li>Set.prototype.add(v)</li>
<li>Set.prototype.clear()</li>
<li>Set.prototype.delete(v)</li>
<li>Set.prototype.entries()</li>
<li>Set.prototype.forEach(callback, thisArg)</li>
<li>Set.prototype.has(v)</li>
<li>Set.prototype.keys()</li>
<li>Set.prototype.values()</li>
</ul>
<h2 id="weakmap">WeakMap</h2>
<p>Weak开头的Set和Map不对key持有引用，不影响GC。因此，他们没有办法对自身entries的key进行直接的枚举。</p>
<p>构造函数和普通的Map相同：</p>
<p><code>new WeakMap(iterable)</code></p>
<ul>
<li>WeakMap.prototype.clear()</li>
<li>WeakMap.prototype.delete(k)</li>
<li>WeakMap.prototype.get(k)</li>
<li>WeakMap.prototype.has(k)</li>
<li>WeakMap.prototype.set(k,v)</li>
</ul>
<h2 id="weakset">WeakSet</h2>
<p><code>new WeakSet(iterable)</code></p>
<ul>
<li>WeakSet.prototype.add(v)</li>
<li>WeakSet.prototype.clear()</li>
<li>WeakSet.prototype.delete(v)</li>
<li>WeakSet.prototype.has(v)</li>
</ul>
<h2 id="typed-objects">Typed Objects</h2>
<p>类似Ruby的Struct的，但是目前没有任何引擎实现。</p>
<h2 id="proxy-objects">Proxy Objects</h2>
<pre><code>var proxy = Proxy(target, handler);
</code></pre><p>将<code>target</code>的函数调用转向到<code>handler</code>之上。目前除了Firefox支持，没有其他任何Javascript引擎支持。</p>
<h2 id="symbol">Symbol</h2>
<p>笔者还在理解中。目前新版的Chrome和node支持。</p>
<h2 id="prmoise">Prmoise</h2>
<p>原生版本的Promise API，有关Promise的内容，会在另外一篇文章内详细说明： <a href="../../Functional_Javascript/Javascript_Promise.html">Javascript Promise</a>。</p>
<h2 id="proxy">Proxy</h2>
<p>Proxy是Javascript元编程的一道大门。Javascript在语言层面无法去重载操作符，但是通过Proxy API，我们可以彻底的修改一个对象的各种行为。这种强大的行为已经在<code>node --harmony</code>和Firefox中支持了。</p>
<p>待补充。可以参考：</p>
<ul>
<li><a href="http://www.slideshare.net/BrendanEich/metaprog-5303821">http://www.slideshare.net/BrendanEich/metaprog-5303821</a></li>
<li><a href="http://soft.vub.ac.be/~tvcutsem/proxies/">http://soft.vub.ac.be/~tvcutsem/proxies/</a></li>
<li><a href="http://ariya.ofilabs.com/2013/07/es6-and-proxy.html">http://ariya.ofilabs.com/2013/07/es6-and-proxy.html</a></li>
</ul>
<hr>
<div class="footnotes">
<ol>
<li id="fn1"><p><a href="http://wiki.ecmascript.org/doku.php?id=harmony:typed_objects">http://wiki.ecmascript.org/doku.php?id=harmony:typed_objects</a></p>
<a href="#fnref1" class="footnoteBackLink" title="Jump back to footnote 1 in the text.">↩</a></li>
<li id="fn2"><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p>
<a href="#fnref2" class="footnoteBackLink" title="Jump back to footnote 2 in the text.">↩</a></li>
<li id="fn3"><p><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-symbol-constructor">http://people.mozilla.org/~jorendorff/es6-draft.html#sec-symbol-constructor</a></p>
<a href="#fnref3" class="footnoteBackLink" title="Jump back to footnote 3 in the text.">↩</a></li>
<li id="fn4"><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise</a></p>
<a href="#fnref4" class="footnoteBackLink" title="Jump back to footnote 4 in the text.">↩</a></li>
</ol>
</div>

</div>
<footer class="misc clearfix">
  <p class="hint">建议在新版的Chrome、Safari、Firefox中阅读</p>
  <div class="left">
    <ul class="inline-list">
      <li><a href="https://github.com/RobinQu/Programing-In-Javascript/">Source</a></li>
      <li><a href="https://github.com/RobinQu/Programing-In-Javascript/blob/master/README.md">Contributors</a></li>
      <li><a href="https://github.com/RobinQu/Programing-In-Javascript/issues">Issues</a></li>
    </ul>
  </div>
  <div class="right">
    <ul class="inline-list">
      <li>Rev <a href="https://github.com/RobinQu/Programing-In-Javascript/tree/acbb2ab/chapters/Javascript_Core/ECMAScript/es6/es6_data_types.md">acbb2ab</a></li>
      <li>2014-05-14T02:39:07.821Z</li>
    </ul>
  </div>
</footer>
</body>
</html>